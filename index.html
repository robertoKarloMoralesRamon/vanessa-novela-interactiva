<!--
Vanessa - Novela Gr√°fica Interactiva (single-file)
Instrucciones r√°pidas:
1) Gu√°rdalo como index.html en la ra√≠z de tu repositorio GitHub.
2) Crea una carpeta /assets y coloca las im√°genes PNG del personaje con los siguientes nombres EXACTOS:
   - assets/vanessa_neutra.png
   - assets/vanessa_feliz.png
   - assets/vanessa_enojada.png
   - assets/vanessa_triste.png
   - assets/vanessa_determinada.png
   - (Opcional) assets/background.png  -> fondo extra para la pantalla de di√°logo
3) Haz commit y push al repositorio. Luego activa GitHub Pages en la rama (main) desde Settings > Pages.
4) Si Cooper Black no aparece en tu equipo, el estilo usa fallback a 'Arial Black' / 'Impact'. Si quieres la fuente exacta, sube una WOFF/TTF y modifica la @font-face en el CSS.
-->
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vanessa - Novela Gr√°fica Interactiva</title>
  <style>
    :root{
      --green:#9be89b;
      --orange:#ff8c2b;
      --card-bg: rgba(255,255,255,0.9);
      --accent:#2b8a3e;
      --ui-radius:14px;
      font-family: 'Cooper Black', 'Arial Black', Impact, sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      background:var(--green);
      display:flex;align-items:center;justify-content:center;
      font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial;
    }

    /* Start screen */
    .start-screen{
      width:100%;height:100vh;
      display:flex;align-items:center;justify-content:center;flex-direction:column
    }
    .start-button{
      background:var(--orange);
      border-radius:18px;
      padding:28px 48px;border:none;font-size:36px;
      cursor:pointer;color:white;
      box-shadow:0 8px 18px rgba(0,0,0,0.2);
    }

    /* App shell */
    .app{
      display:none;
      max-width:1000px;width:100%;height:100vh;
      background:linear-gradient(180deg,#f6fff6, #e8f6ea);
      border-radius:20px;overflow:hidden;
      box-shadow:0 12px 30px rgba(0,0,0,0.15);
      position:relative;
    }
    header{
      height:84px;background:var(--accent);color:white;
      display:flex;align-items:center;padding:12px 20px;gap:16px
    }
    nav{display:flex;gap:8px;margin-left:auto}
    nav button{
      background:transparent;border:2px solid rgba(255,255,255,0.2);
      color:white;padding:8px 12px;border-radius:10px;cursor:pointer
    }

    main{padding:18px;height:calc(100vh - 84px);overflow:auto}
    .screen{display:none;height:100%}
    .active{display:block}

    /* Game */
    #game-canvas{
      background:linear-gradient(#fff,#f0fff0);
      display:block;margin:0 auto;border-radius:12px;
      border:4px solid #dff0d8
    }
    .score-board{
      display:flex;justify-content:space-between;
      align-items:center;padding:8px 12px;margin-top:10px
    }

    /* Info */
    .info-card{
      background:var(--card-bg);padding:18px;border-radius:12px;
      box-shadow:0 6px 18px rgba(0,0,0,0.06)
    }

    /* Story */
    .story-wrap{
      display:flex;flex-direction:column;
      align-items:center;gap:12px
    }
    .char-img{
      width:260px;height:260px;object-fit:contain;
      border-radius:18px;border:6px solid rgba(255,255,255,0.8)
    }
    .balloon{
      max-width:760px;background:white;border-radius:18px;
      padding:16px;font-size:18px;box-shadow:0 8px 18px rgba(0,0,0,0.1)
    }
    .controls{display:flex;gap:8px}
    .btn{padding:10px 14px;border-radius:10px;border:none;cursor:pointer}

    footer{
      position:absolute;right:12px;bottom:12px;
      font-size:12px;color:#666
    }

    @media (max-width:700px){
      .char-img{width:180px;height:180px}
      .balloon{font-size:16px}
      .start-button{font-size:26px;padding:18px 28px}
    }
  </style>
</head>
<body>

  <div class="start-screen" id="startScreen">
    <button id="startBtn" class="start-button">Iniciar</button>
  </div>

  <div class="app" id="appShell">

    <header>
      <h1>Vanessa - Comiendo con Energ√≠a</h1>
      <nav>
        <button data-screen="game">Juegos</button>
        <button data-screen="info">Informaci√≥n</button>
        <button data-screen="story">Historia</button>
      </nav>
    </header>

    <main>

      <!-- GAME -->
      <section id="game" class="screen">
        <div class="score-board">
          <div>Puntaje: <span id="score">0</span></div>
          <div>Vidas: <span id="lives">3</span></div>
        </div>
        <canvas id="game-canvas" width="820" height="420"></canvas>
        <p style="text-align:center;margin-top:10px">
          Controles: ‚Üê y ‚Üí mover canasta. Atrapa frutas y verduras üçéüçåü•ïü•¶üçá
        </p>
      </section>

      <!-- INFO -->
      <section id="info" class="screen">
        <div class="info-card">
          <h2>¬øPor qu√© es importante comer saludable?</h2>
          <p>Comer alimentos variados y coloridos le da a tu cuerpo las vitaminas y energ√≠a necesarias para aprender, jugar y crecer.</p>
          <ul>
            <li>Frutas y verduras: vitaminas y minerales.</li>
            <li>Agua: mantiene el cuerpo hidratado.</li>
            <li>Prote√≠nas: ayudan a crecer.</li>
            <li>Cereales: energ√≠a para jugar.</li>
          </ul>
          <h3>Consejos</h3>
          <ol>
            <li>Llena la mitad del plato de frutas y verduras.</li>
            <li>Lleva una fruta al recreo.</li>
            <li>Bebe agua en vez de refrescos.</li>
            <li>Mu√©vete todos los d√≠as.</li>
          </ol>
        </div>
      </section>

      <!-- STORY -->
      <section id="story" class="screen">
        <div class="story-wrap">
          <img id="charImg" class="char-img" src="assets/vanessa_neutra.png" alt="Vanessa">
          <div id="balloon" class="balloon">Pulsa Siguiente para comenzar la historia con Vanessa.</div>

          <div class="controls">
            <button id="prevBtn" class="btn">Anterior</button>
            <button id="nextBtn" class="btn">Siguiente</button>
          </div>
        </div>
      </section>

    </main>

    <footer>Hecho con cari√±o para tu proyecto escolar</footer>

  </div>

<script>
/* ------------------ Navegaci√≥n ------------------ */
const startBtn = document.getElementById('startBtn');
const startScreen = document.getElementById('startScreen');
const appShell = document.getElementById('appShell');
const navButtons = document.querySelectorAll('nav button');
const screens = document.querySelectorAll('.screen');

startBtn.addEventListener('click', ()=>{
  startScreen.style.display='none';
  appShell.style.display='block';
  showScreen('game');
});

navButtons.forEach(b=>b.addEventListener('click', ()=>showScreen(b.dataset.screen)));

function showScreen(id){
  screens.forEach(s=>s.classList.remove('active'));
  const el = document.getElementById(id);
  if(el) el.classList.add('active');

  if(id !== 'game') gamePause();
  else gameResume();
}

/* ------------------ Juego ------------------ */
const canvas = document.getElementById('game-canvas');
const ctx = canvas.getContext('2d');
let scoreEl = document.getElementById('score');
let livesEl = document.getElementById('lives');

const state = {score:0,lives:3,running:false}

const basket = {x:canvas.width/2 - 40,y:canvas.height-50,w:100,h:34,speed:8}
const items = [];
const fruits = ['üçé','üçå','üçá','üçê','ü•ï','ü•¶'];

function spawnItem(){
  const emoji = fruits[Math.floor(Math.random()*fruits.length)];
  const size = 34 + Math.random()*18;
  items.push({x:Math.random()*(canvas.width-40)+20,y:-40,vy:1.6+Math.random()*2,size,emoji});
}

let frames=0;
function updateGame(){
  if(!state.running) return;
  frames++;
  if(frames % 40 === 0) spawnItem();

  items.forEach(it=>{
    it.y += it.vy + Math.min(3, state.score/10);
  });

  for(let i=items.length-1;i>=0;i--){
    const it = items[i];
    if(it.y > canvas.height){
      items.splice(i,1);
      state.lives--;
      livesEl.textContent = state.lives;
      if(state.lives<=0) gameOver();
    } else if(it.y + it.size > basket.y && it.x > basket.x && it.x < basket.x + basket.w){
      state.score += 10;
      scoreEl.textContent = state.score;
      items.splice(i,1);
    }
  }

  draw();
  requestAnimationFrame(updateGame);
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  ctx.font='28px serif';
  items.forEach(it=>ctx.fillText(it.emoji, it.x, it.y));

  ctx.fillStyle='#8b5a2b';
  ctx.fillRect(basket.x, basket.y, basket.w, basket.h);
  ctx.fillStyle='#fff';
  ctx.font='18px sans-serif';
  ctx.fillText('üß∫', basket.x + basket.w/2 - 10, basket.y + 24);
}

const keys = {};
window.addEventListener('keydown', e=>{
  keys[e.key]=true;
  if(e.key==='ArrowLeft'||e.key==='ArrowRight') e.preventDefault();
  moveBasket();
});
window.addEventListener('keyup', e=>keys[e.key]=false);

function moveBasket(){
  if(keys['ArrowLeft']) basket.x = Math.max(0, basket.x - basket.speed);
  if(keys['ArrowRight']) basket.x = Math.min(canvas.width - basket.w, basket.x + basket.speed);
}

function gamePause(){ state.running=false; }
function gameResume(){ if(!state.running){ state.running=true; requestAnimationFrame(updateGame);} }
function gameOver(){ state.running=false; alert('Game Over! Puntaje: '+state.score); resetGame(); }
function resetGame(){
  items.length=0;
  state.score=0;
  state.lives=3;
  scoreEl.textContent=0;
  livesEl.textContent=3;
}

setInterval(()=>{ if(state.running){ moveBasket(); } }, 30);

/* ------------------ Historia ------------------ */
const dialogue = [
  {emotion:'feliz',text:'¬°Hola a todos! Yo soy Vanessa, su amiga del mundo de la comida saludable. ¬øQuieren saber algo s√∫per importante?'},
  {emotion:'curiosa',text:'¬øQui√©n cree que comer saludable es solo comer verduras? ¬øS√≠? ¬øNo?'},
  {emotion:'neutra',text:'Pues no. Comer saludable es como darle a tu cuerpo el mejor combustible.'},
  {emotion:'dramatico',text:'Imaginen que su cuerpo es un carro de carreras. ¬øQu√© pasa si le pones gasolina chafa?'},
  {emotion:'feliz',text:'Pero si le pones gasolina buena‚Ä¶ ¬°fiuuum!'},
  {emotion:'feliz',text:'Les voy a presentar a los h√©roes de la alimentaci√≥n.'},
  {emotion:'feliz',text:'Frutas, verduras, agua, cereales, prote√≠nas‚Ä¶ ¬°Todos ayudan!'},
  {emotion:'tierna',text:'Cuando haces eso, el cuerpo dice ‚Äú¬°Gracias!‚Äù.'},
  {emotion:'advertencia',text:'Pero ojo con la comida chatarra. No es mala, pero no es para diario.'},
  {emotion:'comico',text:'Yo tambi√©n me he comido una papita‚Ä¶ o dos‚Ä¶ o diez.'},
  {emotion:'serio',text:'Si es diario, el cuerpo se cansa.'},
  {emotion:'energia',text:'Consejos: agua, fruta, colores, moverse, dormir.'},
  {emotion:'inspiradora',text:'Cada vez que comes saludable, te cuidas.'},
  {emotion:'feliz',text:'¬°Cu√≠dense y coman rico! ¬°Adi√≥s, campeones!'}
];

const emotionToFile = {
  'neutra':'assets/vanessa_neutra.png',
  'feliz':'assets/vanessa_feliz.png',
  'enojada':'assets/vanessa_enojada.png',
  'triste':'assets/vanessa_triste.png',
  'determinada':'assets/vanessa_determinada.png'
};

function emotionToSrc(e){ return emotionToFile[e] || emotionToFile['neutra']; }

function mapEmotion(e){
  const m = e.toLowerCase();
  if(m.includes('feliz')||m.includes('energia')) return 'feliz';
  if(m.includes('neutra')) return 'neutra';
  if(m.includes('enoj')||m.includes('advert')) return 'enojada';
  if(m.includes('triste')) return 'triste';
  if(m.includes('determin')||m.includes('dramatico')||m.includes('serio')) return 'determinada';
  return 'neutra';
}

let diaIndex = 0;
const charImg = document.getElementById('charImg');
const balloon = document.getElementById('balloon');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');

function renderDialog(){
  const d = dialogue[diaIndex];
  balloon.textContent = d.text;
  charImg.src = emotionToSrc(mapEmotion(d.emotion));
}

prevBtn.addEventListener('click', ()=>{ if(diaIndex>0) diaIndex--; renderDialog(); });
nextBtn.addEventListener('click', ()=>{ if(diaIndex < dialogue.length-1) diaIndex++; renderDialog(); else alert('¬°Fin de la historia!'); });

renderDialog();

/* Ajuste responsive del canvas */
function fitCanvas(){
  const ratio = 820/420;
  const maxW = Math.min(window.innerWidth - 80, 820);
  canvas.width = maxW;
  canvas.height = Math.round(maxW / ratio);
  basket.y = canvas.height - 50;
}
window.addEventListener('resize', fitCanvas);
fitCanvas();

resetGame();
</script>

</body>
</html>
