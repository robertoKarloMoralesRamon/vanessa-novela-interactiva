<!-- index.html COMPLETAMENTE REPARADO Y FUNCIONAL -->
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vanessa - Novela Interactiva</title>
  <style>
    :root{
      --green:#9be89b;
      --orange:#ff8c2b;
      --card-bg: rgba(255,255,255,0.9);
      --accent:#2b8a3e;
      --ui-radius:14px;
      font-family: 'Cooper Black','Arial Black',Impact,sans-serif;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:var(--green);height:100vh;display:flex;align-items:center;justify-content:center;font-family:system-ui}

    /* Pantalla Inicio */
    #startScreen{width:100%;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center}
    #startButton{background:var(--orange);color:white;padding:24px 40px;font-size:32px;border:none;border-radius:20px;cursor:pointer;box-shadow:0 8px 18px rgba(0,0,0,0.25)}

    /* App */
    #appShell{display:none;width:100%;max-width:1000px;height:100vh;background:white;border-radius:20px;overflow:hidden;box-shadow:0 12px 30px rgba(0,0,0,0.2)}
    header{background:var(--accent);color:white;height:80px;display:flex;align-items:center;justify-content:space-between;padding:0 20px}
    nav button{background:transparent;border:2px solid rgba(255,255,255,0.3);color:white;padding:6px 12px;border-radius:10px;cursor:pointer}

    main{padding:18px;height:calc(100vh - 80px);overflow:auto}
    .screen{display:none}
    .active{display:block}

    /* Juego */
    #game-canvas{background:#ecffe9;border-radius:12px;border:4px solid #c6eec0;margin:auto;display:block}

    /* Info */
    .info-card{background:var(--card-bg);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}

    /* Historia */
    .story-wrap{display:flex;flex-direction:column;align-items:center;gap:12px}
    .char-img{width:260px;height:260px;object-fit:contain;border-radius:18px;border:6px solid #fff;background:transparent}
    .balloon{max-width:760px;background:white;border-radius:18px;padding:16px;font-size:18px;box-shadow:0 8px 18px rgba(0,0,0,0.1)}
    .controls{display:flex;gap:8px}
    .btn{padding:10px 14px;border-radius:10px;border:none;background:var(--accent);color:white;cursor:pointer}
  </style>
</head>

<body>
  <!-- Pantalla Inicio -->
  <div id="startScreen">
    <button id="startButton">Iniciar</button>
  </div>

  <!-- App -->
  <div id="appShell">
    <header>
      <h1>Vanessa - Comiendo con Energ√≠a</h1>
      <nav>
        <button data-screen="game">Juegos</button>
        <button data-screen="info">Informaci√≥n</button>
        <button data-screen="story">Historia</button>
      </nav>
    </header>

    <main>
      <!-- Juego -->
      <section id="game" class="screen">
        <div class="score-board">
          Puntaje: <span id="score">0</span> ‚Äî Vidas: <span id="lives">3</span>
        </div>
        <canvas id="game-canvas" width="820" height="420"></canvas>
      </section>

      <!-- Informaci√≥n -->
      <section id="info" class="screen">
        <div class="info-card">
          <h2>¬øPor qu√© comer saludable?</h2>
          <p>Comer alimentos variados le da energ√≠a a tu cuerpo para aprender y jugar.</p>
        </div>
      </section>

      <!-- Historia -->
      <section id="story" class="screen">
        <div class="story-wrap">
          <img id="charImg" class="char-img" src="assets/vanessa_neutra.png">
          <div id="balloon" class="balloon">Pulsa Siguiente para comenzar.</div>
          <div class="controls">
            <button id="prevBtn" class="btn">Anterior</button>
            <button id="nextBtn" class="btn">Siguiente</button>
          </div>
        </div>
      </section>

    </main>
  </div>

<script>
/******************************
  INICIO: BOT√ìN FUNCIONAL
******************************/
document.addEventListener("DOMContentLoaded", () => {
  const startBtn = document.getElementById("startButton");
  const startScreen = document.getElementById("startScreen");
  const appShell = document.getElementById("appShell");

  startBtn.addEventListener("click", () => {
    startScreen.style.display = "none";
    appShell.style.display = "block";
    showScreen("game");
  });
});

/******************************
  NAVEGACI√ìN DE PANTALLAS
******************************/
const navButtons = document.querySelectorAll("nav button");
const screens = document.querySelectorAll('.screen');

function showScreen(id){
  screens.forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

navButtons.forEach(btn => btn.addEventListener("click", () => showScreen(btn.dataset.screen)));

/******************************
        JUEGO CANASTA
******************************/
const canvas = document.getElementById('game-canvas');
const ctx = canvas.getContext('2d');
let scoreEl = document.getElementById('score');
let livesEl = document.getElementById('lives');

let state = {running:false, score:0, lives:3};
const basket = {x:400, y:380, w:100, h:30, speed:8};
let items = [];
const fruits = ['üçé','üçå','üçá','ü•ï','ü•¶'];

function spawnItem(){
  const emoji = fruits[Math.floor(Math.random()*fruits.length)];
  items.push({x:Math.random()*760+20, y:-40, vy:2, emoji});
}

function updateGame(){
  if(!state.running) return;
  if(Math.random()<0.03) spawnItem();

  items.forEach(it => it.y += it.vy);

  for(let i=items.length-1;i>=0;i--){
    let it = items[i];
    if(it.y > canvas.height){
      items.splice(i,1);
      state.lives--; livesEl.textContent = state.lives;
      if(state.lives<=0) return gameOver();
    }
    if(it.x > basket.x && it.x < basket.x + basket.w && it.y > basket.y){
      items.splice(i,1);
      state.score += 10;
      scoreEl.textContent = state.score;
    }
  }

  draw();
  requestAnimationFrame(updateGame);
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.font = "28px serif";
  items.forEach(it => ctx.fillText(it.emoji, it.x, it.y));

  ctx.fillStyle = "#794d1a";
  ctx.fillRect(basket.x, basket.y, basket.w, basket.h);
}

let keys={};
window.addEventListener("keydown", e=>{ keys[e.key]=true; });
window.addEventListener("keyup", e=>{ keys[e.key]=false; });

setInterval(()=>{
  if(keys['ArrowLeft']) basket.x = Math.max(0, basket.x - basket.speed);
  if(keys['ArrowRight']) basket.x = Math.min(canvas.width-basket.w, basket.x + basket.speed);
}, 30);

function gameOver(){
  state.running=false;
  alert("Game Over ‚Äî Puntaje: " + state.score);
  state.score=0; state.lives=3;
  items=[];
  scoreEl.textContent=0;
  livesEl.textContent=3;
}

function gameResume(){ state.running=true; updateGame(); }
showScreen('game'); gameResume();

/******************************
        HISTORIA VANESSA
******************************/
const dialogue=[
  {emotion:'feliz',text:'¬°Hola! Soy Vanessa y hoy aprenderemos a comer con energ√≠a.'},
  {emotion:'feliz',text:'Las frutas dan vitaminas, las verduras fuerza y el agua energ√≠a.'},
  {emotion:'serio',text:'La comida chatarra est√° bien a veces, pero no todos los d√≠as.'},
  {emotion:'feliz',text:'¬°T√∫ puedes hacer elecciones saludables!'}
];

const emotionToFile={
  'neutra':'assets/vanessa_neutra.png',
  'feliz':'assets/vanessa_feliz.png',
  'enojada':'assets/vanessa_enojada.png',
  'triste':'assets/vanessa_triste.png',
  'determinada':'assets/vanessa_determinada.png'
};

function mapEmotion(e){
  if(e.includes('feliz')) return 'feliz';
  if(e.includes('serio')) return 'determinada';
  return 'neutra';
}

let diaIndex=0;
const charImg = document.getElementById('charImg');
const balloon = document.getElementById('balloon');

function renderDialog(){
  const d = dialogue[diaIndex];
  balloon.textContent = d.text;
  charImg.src = emotionToFile[ mapEmotion(d.emotion) ];
}

renderDialog();

document.getElementById('prevBtn').addEventListener('click',()=>{
  if(diaIndex>0) diaIndex--;
  renderDialog();
});

document.getElementById('nextBtn').addEventListener('click',()=>{
  if(diaIndex<dialogue.length-1) diaIndex++;
  renderDialog();
});
</script>

</body>
</html>
